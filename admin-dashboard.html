<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìŠ¤ë§ˆíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }

        h1 {
            color: #333;
            font-size: 28px;
            margin-bottom: 5px;
        }

        .subtitle {
            color: #666;
            font-size: 14px;
        }

        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .card h2 {
            color: #333;
            font-size: 20px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }

        .seats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .seat {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            position: relative;
            transition: all 0.3s;
        }

        .seat:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .seat-number {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }

        .led-indicator {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .led-green {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
            box-shadow: 0 0 20px rgba(132, 250, 176, 0.6);
        }

        .led-red {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            box-shadow: 0 0 20px rgba(245, 87, 108, 0.6);
        }

        .led-off {
            background: #e0e0e0;
            box-shadow: none;
        }

        .seat-info {
            font-size: 13px;
            color: #666;
        }

        .seat-student {
            font-weight: bold;
            color: #333;
            margin: 5px 0;
        }

        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        th {
            background: #667eea;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
            font-size: 14px;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid #e0e0e0;
            font-size: 13px;
        }

        tr:hover {
            background: #f8f9fa;
        }

        .warning-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }

        .warning-0 {
            background: #d4edda;
            color: #155724;
        }

        .warning-1 {
            background: #fff3cd;
            color: #856404;
        }

        .warning-2 {
            background: #f8d7da;
            color: #721c24;
        }

        .warning-3 {
            background: #721c24;
            color: white;
        }

        .status-normal {
            color: #28a745;
            font-weight: bold;
        }

        .status-warning {
            color: #ffc107;
            font-weight: bold;
        }

        .status-danger {
            color: #dc3545;
            font-weight: bold;
        }

        .status-banned {
            color: #6c757d;
            font-weight: bold;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .stat-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }

        .stat-number {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 13px;
            opacity: 0.9;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        .refresh-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .refresh-btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }

        .timestamp {
            color: #999;
            font-size: 12px;
            text-align: right;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“š ìŠ¤ë§ˆíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h1>
            <p class="subtitle">AIoT ê¸°ë°˜ ì—´ëŒì‹¤ ë…¸ì‡¼ ë°©ì§€ ì‹œìŠ¤í…œ</p>
        </header>

        <div class="dashboard">
            <!-- ì‹¤ì‹œê°„ ì¢Œì„ í˜„í™© -->
            <div class="card">
                <h2>ğŸª‘ ì‹¤ì‹œê°„ ì¢Œì„ í˜„í™©</h2>
                <div class="seats-grid" id="seatsGrid"></div>
                <button class="refresh-btn" onclick="updateSeats()">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
                <div class="timestamp" id="timestamp"></div>
            </div>

            <!-- í†µê³„ -->
            <div class="card">
                <h2>ğŸ“Š ì‹¤ì‹œê°„ í†µê³„</h2>
                <div class="stats">
                    <div class="stat-box">
                        <div class="stat-number" id="statAvailable">0</div>
                        <div class="stat-label">ì‚¬ìš© ê°€ëŠ¥</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="statInUse">0</div>
                        <div class="stat-label">ì‚¬ìš© ì¤‘</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="statUnauthorized">0</div>
                        <div class="stat-label">ë¬´ë‹¨ ì‚¬ìš©</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="statBanned">0</div>
                        <div class="stat-label">ì´ìš©ì •ì§€</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- í•™ìƒ ê²½ê³  í˜„í™© -->
        <div class="card full-width">
            <h2>âš ï¸ í•™ìƒë³„ ê²½ê³  í˜„í™©</h2>
            <div class="table-container">
                <table id="studentTable">
                    <thead>
                        <tr>
                            <th>í•™ë²ˆ</th>
                            <th>ì´ë¦„</th>
                            <th>í˜„ì¬ ì¢Œì„</th>
                            <th>ê²½ê³  íšŸìˆ˜</th>
                            <th>ìƒíƒœ</th>
                            <th>ìµœê·¼ ìœ„ë°˜ ë‚´ì—­</th>
                            <th>ì´ìš©ì •ì§€ ì¢…ë£Œì¼</th>
                        </tr>
                    </thead>
                    <tbody id="studentTableBody"></tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // ì‹œë®¬ë ˆì´ì…˜ ë°ì´í„°
        let seats = [
            { id: 1, status: 'available', student: null, weight: 0 },
            { id: 2, status: 'in-use', student: '2023001', weight: 65 },
            { id: 3, status: 'unauthorized', student: null, weight: 58 },
            { id: 4, status: 'in-use', student: '2023003', weight: 72 }
        ];

        let students = [
            { id: '2023001', name: 'ê¹€ì² ìˆ˜', seat: 2, warnings: 0, status: 'normal', lastViolation: '-', banEndDate: '-' },
            { id: '2023002', name: 'ì´ì˜í¬', seat: null, warnings: 1, status: 'warning', lastViolation: '2ì‹œê°„ ë¹„ì›€', banEndDate: '-' },
            { id: '2023003', name: 'ë°•ë¯¼ìˆ˜', seat: 4, warnings: 2, status: 'danger', lastViolation: 'ë¬´ë‹¨ ì‚¬ìš©', banEndDate: '-' },
            { id: '2023004', name: 'ì •ìˆ˜ì§„', seat: null, warnings: 3, status: 'banned', lastViolation: '2ì‹œê°„ ë¹„ì›€', banEndDate: '2025-01-27' }
        ];

        function renderSeats() {
            const grid = document.getElementById('seatsGrid');
            grid.innerHTML = '';

            seats.forEach(seat => {
                let ledClass = 'led-off';
                let statusText = 'ë¹„ì–´ìˆìŒ';
                let emoji = 'âœ…';
                let studentInfo = '';

                if (seat.status === 'in-use') {
                    ledClass = 'led-green';
                    statusText = 'ì‚¬ìš© ì¤‘';
                    emoji = 'ğŸ‘¤';
                    const student = students.find(s => s.id === seat.student);
                    if (student) {
                        studentInfo = `<div class="seat-student">${student.name} (${student.id})</div>`;
                    }
                } else if (seat.status === 'unauthorized') {
                    ledClass = 'led-red';
                    statusText = 'ë¬´ë‹¨ ì‚¬ìš©';
                    emoji = 'ğŸš¨';
                    studentInfo = '<div class="seat-student">ë¯¸ë“±ë¡ ì‚¬ìš©ì</div>';
                }

                grid.innerHTML += `
                    <div class="seat">
                        <div class="seat-number">ì¢Œì„ ${seat.id}</div>
                        <div class="led-indicator ${ledClass}">${emoji}</div>
                        ${studentInfo}
                        <div class="seat-info">${statusText}</div>
                        <div class="seat-info">ë¬´ê²Œ: ${seat.weight}kg</div>
                    </div>
                `;
            });

            updateTimestamp();
        }

        function renderStudentTable() {
            const tbody = document.getElementById('studentTableBody');
            tbody.innerHTML = '';

            students.forEach(student => {
                const warningClass = `warning-${student.warnings}`;
                let statusClass = '';
                let statusText = '';

                switch(student.status) {
                    case 'normal':
                        statusClass = 'status-normal';
                        statusText = 'ì •ìƒ';
                        break;
                    case 'warning':
                        statusClass = 'status-warning';
                        statusText = 'ì£¼ì˜';
                        break;
                    case 'danger':
                        statusClass = 'status-danger';
                        statusText = 'ìœ„í—˜';
                        break;
                    case 'banned':
                        statusClass = 'status-banned';
                        statusText = 'ì´ìš©ì •ì§€';
                        break;
                }

                const seatDisplay = student.seat ? `ì¢Œì„ ${student.seat}` : '-';

                tbody.innerHTML += `
                    <tr>
                        <td>${student.id}</td>
                        <td>${student.name}</td>
                        <td>${seatDisplay}</td>
                        <td><span class="${warningClass} warning-badge">${student.warnings}íšŒ</span></td>
                        <td><span class="${statusClass}">${statusText}</span></td>
                        <td>${student.lastViolation}</td>
                        <td>${student.banEndDate}</td>
                    </tr>
                `;
            });
        }

        function updateStats() {
            const available = seats.filter(s => s.status === 'available').length;
            const inUse = seats.filter(s => s.status === 'in-use').length;
            const unauthorized = seats.filter(s => s.status === 'unauthorized').length;
            const banned = students.filter(s => s.status === 'banned').length;

            document.getElementById('statAvailable').textContent = available;
            document.getElementById('statInUse').textContent = inUse;
            document.getElementById('statUnauthorized').textContent = unauthorized;
            document.getElementById('statBanned').textContent = banned;
        }

        function updateTimestamp() {
            const now = new Date();
            const timeString = now.toLocaleString('ko-KR');
            document.getElementById('timestamp').textContent = `ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: ${timeString}`;
        }

        function updateSeats() {
            // ì‹¤ì œë¡œëŠ” ì—¬ê¸°ì„œ oneM2M APIë¥¼ í˜¸ì¶œí•´ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ì˜ˆì •
            // ì§€ê¸ˆì€ ì‹œë®¬ë ˆì´ì…˜
            console.log('ì¢Œì„ ì •ë³´ ì—…ë°ì´íŠ¸ ì¤‘...');
            renderSeats();
            renderStudentTable();
            updateStats();
        }

        // ì´ˆê¸° ë Œë”ë§
        renderSeats();
        renderStudentTable();
        updateStats();

        // 5ì´ˆë§ˆë‹¤ ìë™ ì—…ë°ì´íŠ¸ (ì‹œë®¬ë ˆì´ì…˜)
        setInterval(updateSeats, 5000);
    </script>
</body>
</html>